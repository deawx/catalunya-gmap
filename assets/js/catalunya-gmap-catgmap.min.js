/*! Generated 15-08-2017 */

!function(e,t,n){var r=function(){function e(e,r,i){this.serverHost=i.serverHost,this.gMap=new t.maps.Map(e,r),this.markers=n.create(),this.icons=n.create(),this.markerClusterer=new MarkerClusterer(this.gMap,[]),this.infowindow=new t.maps.InfoWindow,this.setLogoCatalunyaMedieval()}return e.prototype={setLogoCatalunyaMedieval:function(){var e=document.createElement("div");e.index=10,e.style.padding="0px";var n=document.createElement("img");n.src=this.serverHost+"/assets/images/logo/logoCM-red-mini.png",n.style.cursor="pointer",e.appendChild(n),this.gMap.controls[t.maps.ControlPosition.BOTTOM_LEFT].push(e)},_resize:function(){var e=this.gMap.getCenter();t.maps.event.trigger(this.gMap,"resize"),this.gMap.setCenter(e)},_on:function(e){var n=this;t.maps.event.addListener(e.obj,e.event,function(t){return e.callback.call(n,t)})},_createMarker:function(e){return e.map=this.gMap,new t.maps.Marker(e)},_createIcon:function(e){var n=document.createElement("div");n.style.padding="2px";var r=document.createElement("div");r.style.cursor="pointer",r.style.textAlign="center",r.title="Click per activar o desactivar "+e.title,n.appendChild(r);var i=document.createElement("div");i.innerHTML='<img src="'+e.icon+'" alt="'+e.title+'" >',r.appendChild(i),this.gMap.controls[t.maps.ControlPosition.RIGHT_TOP].push(n);var a=this;return t.maps.event.addDomListener(r,"click",function(){e.visible?(e.visible=!1,i.style.opacity="0.5"):(e.visible=!0,i.style.opacity="1"),a._setVisible(e.categoria,e.visible),a.markerClusterer.resetViewport_(),a.markerClusterer.redraw_()}),n},_setVisible:function(e,t){t?this.enableBy(function(t){return t.categoria===e}):this.disableBy(function(t){return t.categoria===e})},addIcon:function(e){var t;t=this._createIcon(e),this.icons.add(t)},removeIcon:function(e){},addMarker:function(e){var n;e.position={lat:e.lat,lng:e.lng},n=this._createMarker(e),this.markerClusterer.addMarker(n),this.markers.add(n),e.event&&this._on({obj:n,event:e.event.name,callback:e.event.callback}),e.content&&(this._on({obj:n,event:"click",callback:function(){this.infowindow.setContent(e.content),this.infowindow.open(this.gMap,n)}}),t.maps.event.addListener(this.infowindow,"domready",function(){var e=$(".gm-style-iw").prev();e.css({"background-color":"#fff6eb"}),e.children(":nth-child(4)").css({"background-color":"#fff6eb"}),e.children(":nth-child(3)").children(":nth-child(1)").children(":nth-child(1)").css({"background-color":"#fff6eb"}),e.children(":nth-child(3)").children(":nth-child(2)").children(":nth-child(1)").css({"background-color":"#fff6eb"})}))},findBy:function(e){return this.markers.find(e)},removeBy:function(e){var t=this;t.markers.find(e,function(e){e.forEach(function(e){t.markerClusterer?t.markerClusterer.removeMarker(e):e.setMap(null)})})},enableBy:function(e){var t=this;t.markers.find(e,function(e){e.forEach(function(e){e.setVisible(!0),t.markerClusterer.addMarker(e,!0)})})},disableBy:function(e){var t=this;t.markers.find(e,function(e){e.forEach(function(e){e.setVisible(!1),t.markerClusterer.removeMarker(e,!0)})})},zoom:function(e){if(!e)return this.gMap.getZoom();this.gMap.setZoom(e)}},e}();r.create=function(e,t,n){var e=document.getElementById(e);return new r(e,t,n)},e.Gmap=r}(window,google,List);